picotron cartridge // www.picotron.net
version 2

:: gfx/
:: map/
:: sfx/
:: main.lua
--[[pod_format="raw",created="2025-10-29 04:18:47",modified="2025-11-03 11:45:54",revision=256]]
-- trinkets wallpaper
-- by zep

-- experiment: variable bag size (uncomment line in grab() to use bag0)
local num_shapes = 128
bag0={}
n=rnd{2,4,8,128,256}
for i=1,n do
	add(bag0,rnd(256)\1)
end

function grab()
	if not bag or #bag == 0 then
		bag = {}
		for i=0,num_shapes-1 do
			add(bag,i)
		end
		-- rare items
		for i=128+rnd(8),128,4+rnd(8) do
			add(bag,i)
		end
--		bag = unpod(pod(bag0)) -- experiment: use a small bag sometimes
	end
	
	return del(bag,rnd(bag))
end

local seed = rnd(1000000)
function generate()

	srand(seed)
	bag={}

	fgcol=theme"desktop1"
	bgcol=theme"desktop0"
	
	-- colourful version 
--	cols = {8,9,10,11,12,13,14,16,17,18,23,25,26,27,28,29,30}
--	bgcol = 1

	cls(bgcol)
	
	local rr = 0 -- position variation
	local iw = 30 -- item width
	local ih = 20 -- item height
	
	pal(7,fgcol)
	
	for y=0,20 do
		for x=0,30 do
			local sx = 0+(y % 2) * iw/2 + x * iw
			local sy = 12 + y * ih
			sx+=rnd(rr)-rnd(rr)
			sy+=rnd(rr)-rnd(rr)
			
			if (cols) pal(7,rnd(cols))
			
			spr(grab(), sx, sy)
		end
	end
	set_draw_target()
	pal()
end

function _init()
	window() -- something to draw to
	generate()
	blit(bp)
end

-- only redraw when theme colours change
function _draw()
	if fgcol ~= theme"desktop1" or bgcol ~= theme"desktop0" then
		generate()
		blit(bp)
	end
end


:: .info.pod
--[[pod,created="2025-10-29 04:14:04",icon=userdata("u8",16,16,"00000000000000000000000000000000010101010101010101010101010101010107070707070707070707070707070101070d0d0d0d0d0d0d0d0d0d0d0d070101070d0d0d010d010d010d0d0d0d070101070d0d0d0d0d0d0d0d0d0d0d0d070101070d0d0d010d010d010d0d0d0d070101070d0d0d0d0d0d0d0d0d0d0d0d070101070d0d0d010d010d010d0d0d0d0701010707070707070707070707070707010107071d1d1d1d1d1d1d1d1d070707010107071d1d1d1d1d1d1d1d1d07071d01010707070707070707070707071d0100011d1d1d1d1d1d1d1d1d1d1d1d0100000101010101010101010101010100000000000000000000000000000000000000"),modified="2025-12-14 00:48:27",runtime=23,workspaces={{location="main.lua#17",workspace_index=1},{location="gfx/0.gfx",workspace_index=2},{location="map/0.map",workspace_index=3},{location="sfx/0.sfx",workspace_index=4}}]]
:: gfx/.info.pod
--[[pod,created="2025-10-29 04:14:04",modified="2025-12-14 00:48:27"]]
:: gfx/0.gfx
b64$LS1bW3BvZCxjcmVhdGVkPSIyMDI1LTAxLTE3IDEwOjM1OjQ4Iixtb2RpZmllZD0iMjAyNS0x
MS0wMyAxMTo0MjoyNCIscmV2aXNpb249Mzc4XV1sejQAAhIAAHJKAADzIXtbMF09e2JtcD1weHUA
QyAQEATwRwfAR4CHcGeAZ5BH8EYsZmxhZ3M9MCxwYW5feAgAzHk9MCx6b29tPTd9LD4A3xfAN6BX
kFegN8AX8Ec_AB0wGQfQAgApN_AIAC-wKEgAHfEJKgfwAAeQJyAHcAcgByAHUAdABxAHUAcQAgD-
A1AHIBcgB2AHUAeABzAHoDfwJV8AHWVGR6AHIAcEAD9H8FVCAB55BwAHAAfwCwcAD0YAHv8DOAfQ
BwAHsAcgB5AHQAdwh-BjQgAdoTY3oBcQF5AHMAcEAH8XEBegN-BWRgAd8AA0FzAXgFeQV5AHABcA
B5D-ATAHEAdaAC-wNUwAHRNGkgABSgACBgAClgAPiwIfvwfQF8BXwBfQB-BXPAAdMUUHIMAAgZAn
ACdgJwAnhAA-ByAHhgAfEEVGAAQEAAUiAS-wRaoBH4-wCnfwCHfwCgsBIBAqCwEBKwIRELMCAO0B
74AHQAeQFyAHsBcAB9AXBQMfj1YXABegR7AnXwEhUUYXABeQjQMBhgBgByAHsAcA6gMPMgQeETcD
A9OQJyAnYAdgB3AHQAeAWAARAAIAP4AXIIUCIL9HB9AnoGeQR6AXAPcBJBM3fQIBAgAChQIfJ0QA
HREm-gQiICfFBF9gBxAHQMUEBx8mXgAdc1IHEBcQF3AoAXEAB3AXEBcQMQUPAQQfEDW-BDsNBwAH
AC-wREkAHhFXiAQI-gMAEAAfVxwFHyRDlxECAEIAAJAEEsBjAh82SgAdsSUX0AcAF7AHIBeQXwIR
MLECAFIAALUCAdsBHypUAB0bKJEDFLCgAF8X4AfwN04AHTpjh3BHAx84QgAdoTYH4CfAR6A3sCfQ
AB9JQAAdcFVnkEewN8C_AB9GfABdz0YH4BfAN7BHkGfwVacDIjMnsHd8AB9HyAEfEOAeAogHwAcQ
B2CXYMYBD4QBHhgnFAIZl2ACDxICHlVUFzAXYCsECggAH5CZCSATV68FDk4AT2AXMBfoAyIQZ_wA
QIAnACerBU-AZ5BXRgAfdiQH4AfgN_AGAB8H6wUfcTkH4AfAJ8AEAE-gB-BKQAAdMkQHAPEEHQkJ
AA-QCR4fNRYKAQMHAA_CBiAFPQAIlQAfC00AIhEq2AIRoEMABVsHCwgAAh4AACgAD4gBIRFWPgBI
8AoHAAkADygJHzE1Z4CmBS4AJ6IAAAgAECAGAB9HsgIgITegNQkCJQdTAAcwB3BOADIQJxBoBh9H
XAYfGTdWABEwpABYIAcAB2BWAA9MAR41RScANQgEFQkDBAA-Z-A0wgolU7AX0BewDAAPmAEfEUbq
BiEwB0YAA5IHD9UCIOEX0BfQF6AnECdwJxAnoA4ADx4FH1A3F-AOF68CEBD4CAMIABCgFQAPTAAf
ICcX-AUGxgEMdgURYBYAE4DyAC-AFwcKHyVkZ8ACD_IGIDBEFzDlCRA36QAVUO0AAAwAH4CGDCAQ
Rt8Pn0cAF2CXUJfwUz4AHW9YJ4AXAEc8ACPANhfANwAXcIdgh-AI7Q4BXQFPoAfwOWcHHxGwPAAB
LwmSJ5AXACcAF5AnRQ8REHUHD7sHHyI4N1YNALEKAnsEFHCBBAHDChAgogsPVgAeMTQ3sGkKAkQA
JwAnBgAiFwA3Ch83zwMgISfA5gADdQofJ_4LHzFIJ7B8AQMFCx8nAA4fIEcnJwYZwAYADz0FHxVX
-xAD9wofSEIAICInsMQOH0gkDiADfgAfkH0LLABuDhCwEg_fFyAXkBcAF7AnRgAhYEY3oFfwCgMA
L6A3TAEfFEVsAgEaAwEQBY8HEBewN-AAB2MCH0A7B6A3PwACSQATkFUAAQUDD3oKHos0B-AAN7AX
EJwAAfwCD78EHhNHqAMHlwAhFxCtAC-wO0wAHY9IB_AXoFeQVzkMIwIoFRKwwQYfRzICICAXwGcT
LxfgugIhAXYAH7CkFSQRNT4EXRAHkHeQCgAPPwcfETR0BSnwGQcAH0VGACMSkD4AHwgNAAQPyQIg
EEUAElQXABfwCwkADy0FHhM04gwTAO4MLPAJEQAP7gAeGERCAJ9ncIdgF0AXcGdIAB9RMycgJ1Bv
CjEgB0AOAwAYAxBQMwoAigQBYAAAARUPRBMjEWcSAiIQB0gAH6DGDCQCZgUf0EwAMhElOAARsPIF
E7CtDL-gBwAXgBcAJ6An4GgYICAlF0IAECCRChAHrBgXwBAAL-AjTgAdMSwH0JIVAMIUArsYADkK
BE0KMiAXYEEKHzpYAB0gIwcrCzEgB_CgADfQB_AQAA-4FR8ROvEKNWAXIOUKCrAAADoCT9AH8CxY
AB02SgfQ-gYfWD4AHWBFR6BngEcQA2_AR7An8EdAACAyByAnfQ0TgAoAD0gAIWEpB_AXsActBBAn
3gOfcDcAJ-AId4BXQQMfEEfxAhBH8wkDIwkvBwBpBiAQRTUCZkewJwAHoEYAD4cDICLAR30KEKCr
CC8H4IoAIBdIRAARwFIVL-BIIhEgEBfOECAXAI0FEggHABIJFQAPKxAeIFMX5RkA-AMB5hc-F-BU
PRIfEdDiFzHgF_AIAE-QB-ApZAYhAI4EIrBH2ARPoEfwVr4CIAHGCj-gB9C0AiAVNsoKERDGAxEA
BgYRQBYGT4AH8FKOBx8RAAIAIpAHzAQAWgYVcJMQEqCpEx84tQ8fE8BpDxSQBAAvV7D-DyQAAAlS
ABdwFwAGAD9HcEdJECMWNuweHw5LCSBRRRcAB7BaCF-QR6BHoG8fIDdGV5ARASBwJwQATxAnwCfr
CB8gJRfSEhEQYwYfoAwABC-wNpkJKRGABgAXcAYAF4AeAA_jCSUXNIIXAsMMPjAHkA0JD38GEhHA
BwMiEAclDBAwcBEPtgUeMUVnkOwRGiDUGQ-YAB4vNWdqGgAPoBYgFDfbEAGbEAIGAAOvDh8ncAIf
c1VncBdAF2AEAC9wZ0gVHxAlmyEA0gkwwFeAmxIHBAAPJQchE2Q0DwB4CQ9PBiEQ0G4IQBQH0CcS
AS_QJ8EFITI1BzBHAFEKB9AnQEIFAQ8AD5IdHlBFF9AXEIgEEAsFAA-NAB4RGi8eU_AHsFeQ4Q4C
BgACehQesBUQD9wUFBSwCAQNUhoP-BkjFShWAFWAFxAXgGIAFxBuAC-wJl4ILAH6ABEgYgAv8DZ6
CSkTsJQAMQAHcNoDL-AmZBwgAnMMT0eQZ7D7BiIQJZwCIRcgsxYRoHoBInCHQgUBEgABrQ0eINoe
DxENFhGQmQcCUgBDcDcANwoAARYAABsVACYAL-A20BwgBfgAf5BHkGdwh6BjDSATJoAAAOEIASUT
EGdXCxCQ5QsfN5IAHxDwjwVg0AfwDkegKgIvR6BGACAVRoYBgGAHEEcQB1CHOAQP2AEhEjOcFwFe
AgHRDxAXhw4BciQQF30JISAXDAAfB5sOIRE3YRJP8As3sOYRIjMXB9C5ARGgfwEQkIUYEyenAAEB
AR8A7hEgFTbhAxGwtAsAOgkiwDfiFg-8BR8QNBkNMCfwAC4FASUND-cIIBE5OAARoFUaAUIAHzmG
AB8CjRoEkRoXoBAAL-A0ewQoEjcTHB6Q9QcPRgAZX1eQB-AAAQIgEUTiAgBoAyLAJ1gJD-4mIwAl
JiCgR3QdAEIFD8AaHyBVR8gpEIAEAB_HNhojAGsCQrBngDcEDw9fFCHSRUeQBxAngBcQJ4CnQPQD
ATcaAAQJL-AzTgAiBf4KH3BSADMgZ4CxKwKbAy9HoA4GIjlGJ7CaAAJoBR_g-gUkIDVHsgYDSgAD
OwQBVgAArgYP6gwgETjWB_9wBzA3cFegR6A3wAfgF3IFHxAkDQMAmRgAmwARAAYOAJEAIoAXDAAv
0BeyAx8AhSsUwIEBAI8QD9sAHhBEdwEgN3AGBYM3EAcwBzBXQAwAb0AHEDeQR2gFIAHLAQF1ASVn
kLAFABMJDzYdJSM0dz8eAUkeArMGBA4AT1AHcHcHCh8fNKkhCwEWAB9Agw0iAVAbFEe6FgBGAC-w
ReQcIAECABHQAgAPhAAfMUUHQOsCBK0IDyQaIRM1fgACigAv8Eh5CiAAZAeAJwAX0CdwJ9DqEgD0
Ag_4ByARRfIBACUlIQAHVgYBbw8PdBMhECyLJBAgAQhBNwAHgCYcEqDyCx85zgkgUQ8H4AegWwYA
VhIv8A_ECSAgORfDE2CAR-AAR4DCEw_JACBAQgcgJ2UwAIgAE2DCAgEKAAHzBgDSAwHhBS8nIBAI
IBAn3xDAF9AHsBcgN1A3IBewwAovF_BOLCACOxUAdA8SkG8RAXMkIhAXexEQkIAPD4gJJABrCjCw
N7BvCh8MagggElXGFRkHBwAPzRUgATgAGQkHAB9DRgAdEzKNIBsACAAPSgAfMzonwOEbF4AIAE-A
J-BL-g0iAEcEAU8VAJQNUVAnACcAuxsCEgAEHgAP9AcfESmrEA9WAAEBwxAfOrMuIE0n0AfAUAAS
wFAAD1sCHhEnVxcgEBfIDwKzAhOQDgAAGAAPyQQfMycH0AQZAPkfMRAXULsaAH4JAA4AE5AcAA9-
ISEBFx8AwxcRF-QOLzfwZxkhMDcHsI4kQQcAN5BIGxgwojEPxxAeETdvJb_ANwAncGdwFwBXoOwj
IBc1PggToC8QAO0OAgIAL-AoLgkgIRfAag0j0BdEAA-KBB4RRjUpAR4BH1evNCEA6QoBTxAP5Bsk
MSVHkIImAGMEAegFAwgAAAIAChQADxcqJQRiAABSABEQfAcbYAwAD1oAKCFncO0CEmAGACeHYA4A
L3BnVAAhGjU3DCdngA4AD_sLIRVG8xEEcgIPYiYfPyRngJQABhSAKh4-Z-AlVAkgAdkFAbcZAmQK
H2cNKyQRR5kOARIRH_D3MCAiRwdAAxPALAEfwLUEIBAVfBEyN5A3tTcSkAgdPwfwZswLHxJw4QZ-
V3BngHeAR7ABHxAjUxgBiiIE-SwA5gIGEgAiYAeVFAO5GA-7Ex4iNzdqAQQMAhKwExcfSAcuHxSw
PgAmZ7BIAA-_DB4RI0YCIMBncAEFBAATZ20IDyYKHhEpTgAA2gAGTgAjgGdxCB86GCQhF2C4HQGz
JBRwfQQAxwoP7wAeMVVXgFkkIBA3PhgAPi8RAAgAACUFLwAHXgkfEFY0DBAnBAgfAK82ICFWF04b
AdwXDz4AICAHAH4ILyfAPgAkADMrAWwcD04mIBE1JBkg8AIDCQEKBgwNAB84YgkgA-8LBN4ZH5AS
AAQv8CapJiEh8AjZEiDwCAwAH1VvBR8i8A4uHAZgKx9IGxofBOAgEcAKAC-wDgMPIAJpOhOwgyBW
gBcwB6CbCQ8dJx5BOCegFwwTBo4dAQYPD0YYITM0F9CgOESgBzAXajADLQEfOMILHxHg7gECNh4R
QNElADgeL6AnhxYfIjRn_xAEfwEPmB8hNTRnkPsBApMYD0QAHxI2_TQQQHwQE0ADNQ_OER4QNM4R
sBcQJ5AX4CfgF5AnhwwfIKkOIBZFzwADFwEv8FYzDyADwwwRoJcFL-BlrwwhAWgTFQdEABEJbQci
gCcRAA-7JiEOdUEPsDw4JicnkwIIcCgPXgAzEyaJNQClBgBMAAa4ABFAWwUA0gAxcCcgtgEPXgA1
CsgABZUhHycjHSFg4AfwACfwKxwVsA4AHydjAR8LQgACDgAv8CbfPCAAiyApN9AIAC-wGbEdIm3w
AAewN8AKAC-wFk4AHTAUB-BTFwBVDCDwAq8hESD6ECDwChgAL-AaKgUfAJUGIPAMBQAQCzIDUAsH
MAcghyUP7yMggSYnsEfwCYeQEwQB3QMBAQ4AdwIPbgkfdDNXkAfgBwAGAD9XkFdiCR8RJBA7ATMW
AmMMAcASARAAAQQAAMMPDz8NHzQlB_BQAANPEAKFBA4IAAJ4AA_9Ch_-NifwDEfwCmfwCIc5AR8z
NwfAFQICBgAGCgAfwHgIIDQ2J8DLADEncBf3ABI3thAPFA8fQUUX4AdSLAEhAQAUDSGAR54DLzew
hhEgESc4AFLgBwBHgPUFIwcAXgAf4MAaIDJGB9DtMyIXwKETLwfQPwYgEjjDJxAXBAAQsHw0LwcQ
dgEiBGk6FIAOBg6nCw9GABgBsAEPRgAmEzb4BSQQF9cCAQgAEEeUHw95EiACuSoQ0G0qDzY0IQBY
EQP2Lx8OWQEgAfsQJSewngMpAAf3ES8nACcbDFBtPTd9fQ==
:: map/.info.pod
--[[pod,created="2025-10-29 04:14:04",modified="2025-12-14 00:48:27"]]
:: map/0.map
b64$LS1bW3BvZCxjcmVhdGVkPSIyMDI1LTAxLTE3IDEwOjM1OjQ4Iixtb2RpZmllZD0iMjAyNS0x
MC0yOSAwNDoxNDowNSIscmV2aXNpb249Ml1dbHo0AEwAAABQAAAA8Rx7e2JtcD1weHUATIAgIAD-
AAD---8DLGhpZGRlbj1mYWxzZSxwYW5feD0wCADSeT0wLHRpbGVfaD0xNgoAEHcKAIB6b29tPTF9
fQ==
:: sfx/.info.pod
--[[pod,created="2025-10-29 04:14:04",modified="2025-12-14 00:48:27"]]
:: sfx/0.sfx
b64$LS1bW3BvZCxjcmVhdGVkPSIyMDI1LTA3LTMxIDA4OjMwOjI4Iixtb2RpZmllZD0iMjAyNS0x
MC0zMSAwMzo1ODoyOSIscmV2aXNpb249MV1dbHo0AKAAAAALCgAA-zBweHUAAygAAAQABA9AEAIO
AAGgASACoA4ADxAADfDKAQIDQA8PkAQFBgdADJAICQoLQAyQDwwPDQ8ODEAM8P8BAOv-J6oBEAYP
MBABIAEgAfAAAhACDhABIA8hIAEwD0Dwww8oD--wxg-4Cg--D4AP9w8NAfAJARAGDjAA------_9
H-8BAKzPyA9AAA8QQP--sPD-AQD-6lD-----KQ==
:: [eoc]
